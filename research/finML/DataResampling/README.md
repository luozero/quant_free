## Financial Data Structure

### Motivation

Chapter 2에서는 비정형 금융 데이터를 다루는 방법을 알아보고, 이를 바탕으로 Machine Learning 알고리즘에서 활용할 수 있는 구조화된 데이터셋을 도출하는 방법을 알아본다. 
대개 타인이 처리해 둔 데이터셋을 이용하면 타인의 발견을 재탕하거나 타인이 곧 발견할 내용이기 때문에 그다지 사용하고 싶지 않은 법이다. 
가장 이상적인 방법은 먼저 비정형 원시 데이터를 수집한 후, 의미있는 특성을 알아낼 수 있는 방법으로 처리하는 것이다.

### Essential types of Financial Data

금융 데이터는 다음과 같이 여러 형식으로 존재한다

|기본 데이터|시장 데이터|분석|대체 데이터|
|:---:|:---:|:---:|:---:|
|자산 <br> 부채 <br> 영업 <br> 비용/수익 <br> 거시경제 변수| 가격/이자율/내재 변동성 <br> 거래량 <br> 배당/쿠폰(이표) <br>시중 금리 <br>호가/취소 <br> 공격적 포지션 방향(aggressor side)| 분석가 추천 <br> 신용평가 <br>이익 예측 <br>뉴스 감성 <br>Analyst Report|위성/CCTV영상 <br> 구글 검색 데이터 <br>트위터/채팅 <br>메타 데이터|

#### 1. Fundamental Data

fundamental data에는 감독 기관 제출 자료에서 찾을 수 있는 정보와 비즈니스 분석이 포함된다. 대개 분기별 회계 데이터다. 이러한 자료의 특이 사항은 자료 보고에 시간 지연이 있다는 점이다. 각 데이터가 언제 산출됐는지 정확히 확인하고 공식적인 자료가 공개된 이후에만 분석에 활용해야 한다.
초보자들의 흔한 오류는 이러한 자료가 회기 말에 공개됐다고 가정하는 것이다. 그런 경우는 절대로 없다.

예를 들어, Bloomberg가 공개하는 fundamental data는 보고서상의 최종 날짜에 따라 정렬되는데, 공개된 날 이전 데이터이다. 다시 말해 Bloomberg는 확정되기 이전의 날짜에 그 당시 알지 못하는 값들을 할당하여 자료를 제공한 셈이다.
해마다 많은 자료, 특히 Factor Investing에 있어서 얼마나 많은 논문들이 회기가 맞지 않는 기초 데이터를 이용해 발표하는지 알게 되면 아마 믿을 수 없을 정도로 놀라게 될 것이다.
데이터의 이용 시점을 실제 발표 시점에 맞추면 이들 논문의 많은 발견들이 잘못 됐음을 보게 될 것이다.

fundamental data의 두 번째 측면은 데이터가 backfilled되거나 re-instated된다는 것이다. 여기서 backfilled란 당시에는 그 값을 알 수 없었음어도 불구하고 어떤 값을 할당하는 것을 말하고, 're-instated'되었단 것은 최초 발표에 잘못 기입한 값을 나중에 수정해 제대로 기입하는 것을 뜻한다.
대부분의 회사는 최초 발표 이후 한참 후에 지난 분기 자료를 여러 번 수정하며, 데이터 업체들은 초깃값을 수정값으로 바꿔 놓는다. 문제는 수정된 값은 최초 발표 때에는 알 수 없다는 점이다.
어떤 데이터 업체는 이런 문제점을 회피하고자 각 변수별로 여러 개의 날짜와 값의 쌍으로 저장한다.
예를 들어, 매 분기별 GDP 데이터는 대개 세 가지 다른 값을 갖는데, 최초 공개값과 2개의 월별 수정치이다.
여전히 많은 연구 자료에서 최종값을 사용하면서도 최초 공개 날짜로 잘못 부여하거나, 심지어 보고 기간의 마지막 날짜를 부여하기도 한다. 이러한 문제와 그 영향은 차후에 다시 알아본다.

fundamental data는 대단히 잘 정규화되어 있고 빈도도 적다. 시중에 많이 알려진 자료일수록 유용성은 떨어지는 법이다. 그러나 여전히 다른 자료와 함께 종합적으로 볼 때에는 가치가 있을 수 있다.

#### 2. Market Data

market data란 거래소나 trading venue에서 발생하는 모든 자료를 말한다. 이상적으로, 데이터 공급자는 트레이딩 북을 완전히 재구성할 수 있도록 하는 $\text{FIX}$메세지 또는 $\text{BWIC}$ 반응에 대한 전체 자료와 같은 모든 종류의 비정형 정보를 담은 원시 데이터를 제공한다.
모든 시장 참여자는 자신만의 기록을 남기는 법이므로 주의 깊게 살펴보면 경쟁자들의 그 다음 전략을 예측할 수 있다. 
예를 들어, Time Weighted Average Price 알고리즘은 매우 특별한 흔적을 남기는데, predatory algorithm이 이를 적극적으로 활용해 장 종료 전에 $\text{TWAP}$ 트레이등을 선행 매매한다.
사람들이 수동으로 매매할 때에는 주로 규정된 최소 거래 단위에 따라 거래하게 된다. 이 사실을 이용하면 특정 시간에 몇 퍼센트의 거래가 이뤄졌는지 추정해볼 수 있으며, 특별한 시장 행태와 연계할 수 있다.

$\text{FIX}$ 데이터의 매력적인 특성 중 하나는 fundamental data와 달리 가공하기가 쉽지 않다는 것이다. 또한 데이터의 양도 풍부해 하루에 10TB 정도씩 생성된다. 
이렇기 때문에 전략 연구에 있어서 보다 흥미로운 데이터셋이다.

#### 3. Analytics

analytics는 fundamental data, market data, alternative data 또는 다른 분석을 종합한 원시 데이터로부터 파생된 데이터로 생각할 수 있다. 
분석 데이터의 특성은 정보의 내용 자체에 있는 것이 아니라 원래 소스에서는 바로 알아볼 수 없는 정보이므로 특별한 방법으로 가공해야만 알 수 있다.
투자 은행과 연구소는 여러 회사의 비즈니스 모델, 활동, 경쟁, 전망 등을 심층 분석한 결과로부터 얻은 귀중한 자료를 판매한다. 몇몇 특화된 회사는 뉴스 보도나 SNS상으로부터 감지된 Sentiment 등의 대체 데이터로부터 도출된 통계를 판매하기도 한다.

Analytic의 장점은 원시 데이터로부터 신호를 추출한다는 점이고, 부정적인 면은 비용이 과도하고 분석을 위한 방법론들이 편향되거나 불투명하고, 경쟁자들도 동일한 방법을 사용할 것이라는 점이다.


#### 4. Alternative Data

Koranovic & Krishnamachari(2017)는 대체 데이터를 생성 소스에 따라 개인, 비즈니스 프로세서, 센서로 구분했다. 일부 유명한 위성 이미지나 비디오는 대형 선박을 모니터링하거나 터널의 교통량, 주차장 여유 공간 등에 대한 정보도 포함한다.
대체 데이터의 주된 차별점은 그것이 최초 정보라는 점이다. 즉 다른 소스에 아직 사용되지 않은 정보를 의미한다. Exxon Mobile의 높은 영업이익이 발표되기 전, 시장 가격이 오르기 전, 분석가들이 최근 경영 정보에 대해 논평을 쓰기 전, 이 모든 것 이전에 선박의 흐름이 있고, 시추공과 파이프라인의 움직임이 있는 법이다.
이러한 행위들은 다른 데이터 형식에 반영되기 몇 달 전에 미리 반영한다. 대체 데이터의 두 가지 문제점은 비용과 사적 비밀 보장에 관한 것이다. 모든 스파이 장비는 비싼 법이고 방관자는 물론, 감시 당한 회사들이 반대할 수 있다.

alternative data는 고유하며 처리가 쉽지 않은 데이터셋으로 작업할 수 있는 기회를 제공한다. 저장이나 처리, 조작이 힘든 데이터는 항상 가장 좋은 데이터에 속한다는 점을 기억하자.
사내의 데이터 인프라 구조 침이 역정을 낼 만한 데이터라면 대개 아주 유용한 자료일 가능성이 높다. 아마도 경쟁자들은 여러 이유로 사용을 포기하거나 음성확하게 데이터를 처리했을 것이다.